


```cpp
BOOL CreateProcessA(
  [in, optional]      LPCSTR                lpApplicationName,
  [in, out, optional] LPSTR                 lpCommandLine,
  [in, optional]      LPSECURITY_ATTRIBUTES lpProcessAttributes,
  [in, optional]      LPSECURITY_ATTRIBUTES lpThreadAttributes,
  [in]                BOOL                  bInheritHandles,
  [in]                DWORD                 dwCreationFlags,
  [in, optional]      LPVOID                lpEnvironment,
  [in, optional]      LPCSTR                lpCurrentDirectory,
  [in]                LPSTARTUPINFOA        lpStartupInfo,
  [out]               LPPROCESS_INFORMATION lpProcessInformation
);
```

### Code Breakdown:

1. **lpApplicationName:** This is the name of the module (Application) to be executed. This module can be a Windows-based application. It can be some other type of module (for example, MS-DOS or OS/2) if the appropriate subsystem is available on the local computer.

   The string can specify the full path and file name of the module to execute or it can specify a partial name. In the case of a partial name, the function uses the current drive and current directory to complete the specification. (keep in mind that the function will not use the search path. This parameter must include the file name extension; no default extension is assumed.)
   
   The _lpApplicationName_ parameter can be **NULL**. In that case, the module name must be the first white space–delimited token in the _lpCommandLine_ string.
   
   > [!IMPORTANT]
> If you are using a long file name that contains a space, use quoted strings to indicate where the file name ends and the arguments begin; otherwise, the file name is ambiguous. For example, consider the string "c:\program files\sub dir\program name". This string can be interpreted in a number of ways. The system tries to interpret the possibilities in the following order:
> 
> 1. **c:\program.exe**
> 2. **c:\program files\sub.exe**
> 3. **c:\program files\sub dir\program.exe**
> 4. **c:\program files\sub dir\program name.exe**
> 
> If the executable module is a 16-bit application, _lpApplicationName_ should be **NULL**, and the string pointed to by _lpCommandLine_ should specify the executable module as well as its arguments.
> 
> To run a batch file, you must start the command interpreter; set _lpApplicationName_ to cmd.exe and set _lpCommandLine_ to the following arguments: /c plus the name of the batch file.

2.  **lpCommandLine:** This is the name of the module (Application) to be executed. This module can be a Windows-based application. It can be some other type of module (for example, MS-DOS or OS/2) if the appropriate subsystem is available on the local computer. 

### Process creation and debugging using CreateProcess:

```C
// CreateProcess.c
#include <stdio.h>
#include <windows.h>

int main(void)
{
	/*
	BOOL CreateProcessW(
	  [in, optional]      LPCWSTR               lpApplicationName,
	  [in, out, optional] LPWSTR                lpCommandLine,
	  [in, optional]      LPSECURITY_ATTRIBUTES lpProcessAttributes,
	  [in, optional]      LPSECURITY_ATTRIBUTES lpThreadAttributes,
	  [in]                BOOL                  bInheritHandles,
	  [in]                DWORD                 dwCreationFlags,
	  [in, optional]      LPVOID                lpEnvironment,
	  [in, optional]      LPCWSTR               lpCurrentDirectory,
	  [in]                LPSTARTUPINFOW        lpStartupInfo,
	  [out]               LPPROCESS_INFORMATION lpProcessInformation
	);
	*/
	
	// If the process failed to create (and display to our screen) print a debug          error
	STARTUPINFOW si = { 0 };
	PROCESS_INFORMATION pi = { 0 };
	if (!CreateProcessW(
		L"C:\\Windows\\System32\\notepad.exe",
		NULL,
		NULL,
		NULL,
		FALSE,
		BELOW_NORMAL_PRIORITY_CLASS,
		NULL,
		NULL,
		&si,
		&pi
	))
	{
		printf("(-) failed to create process, error: %ld", GetLastError());
		return EXIT_FAILURE; // Return failure
	}
	// Return a successful exit code (same as "return 0")
	printf("process sucessfully created with a pid of: %ld", pi.dwProcessId);
	return EXIT_SUCCESS;
}
```
